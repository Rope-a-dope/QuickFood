(this.webpackJsonponlineorder_front=this.webpackJsonponlineorder_front||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(23),a=n.n(i),o=(n(144),n(31)),s=n(232),u=n(230),l=(n(145),n(72)),j=n(134),d=n(66),h=n(132),f=n(228),b=n(227),m=function(e){var t="/login?username=".concat(e.username,"&password=").concat(e.password);return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to log in")}))},O=function(){return fetch("/cart").then((function(e){if(200!==e.status)throw Error("Fail to get shopping cart data");return e.json()}))},p=n(139),g=n(9),x=l.a.Option,y=function(e){var t=e.itemId,n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],a=r[1];return Object(g.jsx)(d.a,{title:"Add to shopping cart",children:Object(g.jsx)(h.a,{loading:i,type:"primary",icon:Object(g.jsx)(p.a,{}),onClick:function(){a(!0),function(e){return fetch("/order/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to add menu item to shopping cart")}))}(t).then((function(){return j.b.success("Successfully add item")})).catch((function(e){return j.b.error(e.message)})).finally((function(){a(!1)}))}})})},v=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),a=Object(o.a)(i,2),s=a[0],u=a[1],d=Object(c.useState)([]),h=Object(o.a)(d,2),m=h[0],O=h[1],p=Object(c.useState)(!1),v=Object(o.a)(p,2),S=v[0],w=v[1],C=Object(c.useState)(!1),F=Object(o.a)(C,2),I=F[0],E=F[1];return Object(c.useEffect)((function(){E(!0),fetch("/restaurants").then((function(e){if(200!==e.status)throw Error("Fail to get restaurants");return e.json()})).then((function(e){O(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){E(!1)}))}),[]),Object(c.useEffect)((function(){var e;s&&(w(!0),(e=s,fetch("/restaurant/".concat(e,"/menu")).then((function(e){if(200!==e.status)throw Error("Fail to get menus");return e.json()}))).then((function(e){r(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){w(!1)})))}),[s]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.a,{value:s,onSelect:function(e){return u(e)},placeholder:"Select a restaurant",loading:I,style:{width:300},onChange:function(){},children:m.map((function(e){return Object(g.jsx)(x,{value:e.id,children:e.name})}))}),s&&Object(g.jsx)(f.b,{style:{marginTop:20},loading:S,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:n,renderItem:function(e){return Object(g.jsx)(f.b.Item,{children:Object(g.jsxs)(b.a,{title:e.name,extra:Object(g.jsx)(y,{itemId:e.id}),children:[Object(g.jsx)("img",{src:e.imageUrl,alt:e.name,style:{height:340,width:"100%",display:"block"}}),"Price: ".concat(e.price)]})})}})]})},S=n(127),w=n(138),C=n(133),F=n(229),I=n(231),E=n(234),T=n(235),k=function(e){Object(w.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(S.a)(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.onFinish=function(t){e.setState({loading:!0}),m(t).then((function(){j.b.success("Login Successful"),e.props.onSuccess()})).catch((function(e){j.b.error(e.message)})).finally((function(){e.setState({loading:!1})}))},e.render=function(){return Object(g.jsxs)(F.a,{name:"normal_login",onFinish:e.onFinish,style:{width:300,margin:"auto"},children:[Object(g.jsx)(F.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(g.jsx)(I.a,{prefix:Object(g.jsx)(E.a,{}),placeholder:"Username"})}),Object(g.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(g.jsx)(I.a.Password,{prefix:Object(g.jsx)(T.a,{}),placeholder:"Password"})}),Object(g.jsx)(F.a.Item,{children:Object(g.jsx)(h.a,{type:"primary",htmlType:"submit",loading:e.state.loading,children:"Login"})})]})},e}return n}(r.a.Component),P=n(233),L=n(236),M=u.a.Text,B=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),a=Object(o.a)(i,2),s=a[0],u=a[1],l=Object(c.useState)(!1),b=Object(o.a)(l,2),m=b[0],p=b[1],x=Object(c.useState)(!1),y=Object(o.a)(x,2),v=y[0],S=y[1],w=function(e){var t=e.itemId,n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],a=r[1];return Object(g.jsx)(d.a,{title:"Remove from shopping cart",children:Object(g.jsx)(h.a,{loading:i,type:"primary",icon:Object(g.jsx)(L.a,{}),onClick:function(){a(!0),function(e){return fetch("/cart/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(200!==e.status)throw Error("Fail to remove menu item from shopping cart")}))}(t).then((function(){j.b.success("Successfully remove item"),O().then((function(e){u(e)}))})).catch((function(e){return j.b.error(e.message)})).finally((function(){a(!1)}))}})})};Object(c.useEffect)((function(){n&&(p(!0),O().then((function(e){u(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){p(!1)})))}),[n]);var C=function(){r(!1)};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(h.a,{type:"primary",shape:"round",onClick:function(){r(!0)},children:"Cart"}),Object(g.jsx)(P.a,{title:"My Shopping Cart",onClose:C,visible:n,width:520,footer:Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(g.jsx)(M,{strong:!0,children:"Total price: $".concat(Math.round(100*(null===s||void 0===s?void 0:s.totalPrice))/100)}),Object(g.jsxs)("div",{children:[Object(g.jsx)(h.a,{onClick:C,style:{marginRight:8},children:"Cancel"}),Object(g.jsx)(h.a,{onClick:function(){S(!0),fetch("/checkout").then((function(e){if(200!==e.status)throw Error("Fail to checkout")})).then((function(){j.b.success("Successfully checkout"),r(!1)})).catch((function(e){j.b.error(e.message)})).finally((function(){S(!1)}))},type:"primary",loading:v,disabled:m||0===(null===s||void 0===s?void 0:s.orderItemList.length),children:"Checkout"})]})]}),children:Object(g.jsx)(f.b,{loading:m,itemLayout:"horizontal",dataSource:null===s||void 0===s?void 0:s.orderItemList,renderItem:function(e){return Object(g.jsxs)(f.b.Item,{children:[Object(g.jsx)(f.b.Item.Meta,{title:e.menuItem.name,description:"$".concat(e.price)}),Object(g.jsx)(w,{itemId:e.id})]})}})})]})},H=s.a.Header,U=s.a.Content,_=u.a.Title;var q=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(g.jsxs)(s.a,{style:{height:"100vh"},children:[Object(g.jsx)(H,{children:Object(g.jsxs)("div",{className:"header",children:[Object(g.jsx)(_,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Lai Food"}),n&&Object(g.jsx)("div",{children:Object(g.jsx)(B,{})})]})}),Object(g.jsx)(U,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(g.jsx)(v,{}):Object(g.jsx)(k,{onSuccess:function(){return r(!0)}})})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,237)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};a.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(q,{})}),document.getElementById("root")),A()}},[[225,1,2]]]);
//# sourceMappingURL=main.b9573f64.chunk.js.map